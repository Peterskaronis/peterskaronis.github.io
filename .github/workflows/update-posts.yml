name: Update Posts                                                                                                    
                                                                                                                        
  on:                                                                                                                   
    schedule:                                                                                                           
      - cron: '*/15 * * * *'                                                                                               
    workflow_dispatch:                                                                                                  
                                                                                                                        
  jobs:                                                                                                                 
    update:                                                                                                             
      runs-on: ubuntu-latest                                                                                            
      steps:                                                                                                            
        - uses: actions/checkout@v4                                                                                     
        - uses: actions/setup-node@v4                                                                                   
          with:                                                                                                         
            node-version: '20'                                                                                          
        - run: node scripts/update-posts.js                                                                             
        - name: Commit changes                                                                                          
          run: |                                                                                                        
            git diff --quiet || (                                                                                       
              git config user.name "github-actions[bot]"                                                                
              git config user.email "github-actions[bot]@users.noreply.github.com"                                      
              git add index.html archive.html                                                                           
              git commit -m "Update posts from RSS feeds"                                                               
              git push                                                                                                  
            )                             
