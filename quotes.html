<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotes — Peter Skaronis</title>
    <meta name="description" content="A collection of quotes that inspire me.">
    <link rel="canonical" href="https://skaronis.com/quotes.html">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Quotes — Peter Skaronis">
    <meta property="og:description" content="A collection of quotes that inspire me.">
    <meta property="og:url" content="https://skaronis.com/quotes.html">
    <meta property="og:site_name" content="Peter Skaronis">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@peter_skaronis">
    <meta name="twitter:title" content="Quotes — Peter Skaronis">
    <meta name="twitter:description" content="A collection of quotes that inspire me.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="/" class="back-link">&larr; Home</a>
            <h1>Quotes</h1>
            <p>A collection of quotes that inspire me. One is shown daily on the homepage.</p>
            <p class="quote-count" id="quote-count"></p>
        </header>

        <div class="filters">
            <span class="filter-label">Filter by Author</span>
            <div class="filter-buttons" id="filter-buttons">
                <button class="filter-btn active" data-author="all">All</button>
            </div>
        </div>

        <div class="quotes-list" id="quotes-list">
        </div>

        <footer class="with-border">
            <div class="footer-links">
                <a href="/">Home</a>
                <a href="now.html">Now</a>
                <a href="https://x.com/peter_skaronis">Twitter</a>
            </div>
            <p class="copyright">Made in Vancouver</p>
        </footer>
    </div>

    <script>
    (function() {
        fetch('quotes.json')
            .then(r => r.json())
            .then(quotes => {
                // Get unique authors sorted by quote count
                const authorCounts = {};
                quotes.forEach(q => {
                    authorCounts[q.author] = (authorCounts[q.author] || 0) + 1;
                });
                const authors = Object.keys(authorCounts).sort((a, b) => authorCounts[b] - authorCounts[a]);

                // Build filter buttons
                const filterContainer = document.getElementById('filter-buttons');
                authors.forEach(author => {
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.dataset.author = author;
                    btn.textContent = author + ' (' + authorCounts[author] + ')';
                    filterContainer.appendChild(btn);
                });

                // Build quotes list
                const listContainer = document.getElementById('quotes-list');
                quotes.forEach((q, i) => {
                    const item = document.createElement('div');
                    item.className = 'quote-item';
                    item.dataset.author = q.author;
                    item.innerHTML = '<p class="quote-text">' + q.quote + '</p>' +
                                    '<p class="quote-author">' + q.author + '</p>';
                    listContainer.appendChild(item);
                });

                // Update count
                document.getElementById('quote-count').textContent = quotes.length + ' quotes';

                // Filter functionality
                const buttons = document.querySelectorAll('.filter-btn');
                const items = document.querySelectorAll('.quote-item');

                buttons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        // Update active button
                        buttons.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');

                        // Filter quotes
                        const author = btn.dataset.author;
                        let visibleCount = 0;
                        items.forEach(item => {
                            if (author === 'all' || item.dataset.author === author) {
                                item.classList.remove('hidden');
                                visibleCount++;
                            } else {
                                item.classList.add('hidden');
                            }
                        });

                        // Update count
                        if (author === 'all') {
                            document.getElementById('quote-count').textContent = quotes.length + ' quotes';
                        } else {
                            document.getElementById('quote-count').textContent = visibleCount + ' quotes by ' + author;
                        }
                    });
                });
            })
            .catch(err => {
                document.getElementById('quotes-list').innerHTML = '<p style="color:#909090">Could not load quotes.</p>';
            });
    })();
    </script>
    <script src="scripts/share-selection.js"></script>
</body>
</html>
